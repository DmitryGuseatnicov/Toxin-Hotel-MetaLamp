include ./../input/input.pug
include ./../button/button.pug

mixin dropdown(options = {})
  -
    const { label, placeholder, open, type = "guests" ,items = [], buttonsWithAction = true } = options

    const classes = [
      "dropdown",
      "js-dropdown",
      open ? " dropdown_open" : ""
    ]
    
  div(class=classes, data-type=type)
    .dropdown__header.js-dropdown__header
      .dropdown__input.js-dropdown__input
        +input({
          type: "text", 
          label: label, 
          placeholder: placeholder, 
          readonly: true, 
          textEllipsis: true
        })
        .dropdown__icon 
          span.dropdown__icon-arrow.material-icons expand_more
    ul.dropdown__drop-items.js-dropdown__drop-items 
      each item in items 
        - const { name = "", value = "" } = item
        li.dropdown__item.js-dropdown__item
          span.dropdown__item-name.js-dropdown__item-name= name
          .dropdown__calculator
            button.dropdown__calculator-action-minus.js-dropdown__calculator-action-minus -
            span.dropdown__calculator-value.js-dropdown__calculator-value= value
            button.dropdown__calculator-action-plus.js-dropdown__calculator-action-plus +

      if (buttonsWithAction)
        .dropdown__buttons
          .dropdown__button-clear.js-dropdown__button-clear
            +button({
              text: "очиcтить",
              textColor: "purple",
              height: "short"
            })
          .dropdown__button-apply.js-dropdown__button-apply
            +button({
              text: "применить", 
              textColor: "purple",
              height: "short"
            })
